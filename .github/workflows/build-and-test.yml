
# Github Actions で自動テストを行う方法を記述したものです。

name: Build and Test

on: push

env:
  BUILD_TYPE: RelWithDebInfo
#  BUILD_TYPE: Debug

jobs:
  build-and-test:

    runs-on: ${{matrix.os}}

    strategy:
      fail-fast: false
      matrix:
        os: [windows-latest, macos-latest, ubuntu-latest]

    steps:
    - uses: actions/checkout@v3
      with:
        submodules: true

    - name: Build
      uses: ./.github/actions/build
      with:
        shell_type: ${{ (runner.os == 'Windows' && 'powershell') || 'bash' }}

    - name: Run Test of C# Wrapper
      run: 'dotnet test -p:Configuration=Release -p:Platform="Any CPU" --verbosity normal ${{github.workspace}}/wrappers/csharp/LibPLATEAU.NET'